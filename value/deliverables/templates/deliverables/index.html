{% extends 'base.html' %}

{% load staticfiles %}

{% block javascript %}
  <script src="{% static 'js/deliverables/deliverables.js' %}"></script>
{% endblock javascript %}

{% block breadcrumb %}
  <ol class="breadcrumb">
    <li><a href="{% url 'home' %}">Home</a></li>
    <li class="active">Deliverables</li>
  </ol>
{% endblock breadcrumb %}

{% block content %}

  {% if user.is_superuser %}
    <div class="clearfix" style="margin-bottom: 20px">
      <a class="btn btn-primary pull-right" href="{% url 'deliverables:new' %}"><span class="glyphicon glyphicon-plus"></span> New deliverable</a>
    </div>

  {% endif %}

  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Deliverables</h3>
    </div>
    <table class="table table-hover js-tbl-deliverables">
      <thead>
        <tr>
          <th>Name</th>
          <th>Manager</th>
          <th>Updated at</th>
        </tr>
      </thead>
      <tbody>
        {% for deliverable in deliverables %}
          <tr data-deliverable-id="{{ deliverable.pk }}">
            <td><a href="{% url 'deliverables:deliverable' deliverable.pk %}">{{ deliverable.name }}</a></td>
            <td>{{ deliverable.manager.profile.get_display_name }}</td>
            <td>{{ deliverable.updated_at }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

{% endblock content %}
