{% extends 'base.html' %}

{% load staticfiles attr fieldtype %}

{% block javascript %}

{% endblock javascript %}

{% block breadcrumb %}
  <ol class="breadcrumb">
    <li><a href="{% url 'home' %}">Home</a></li>
    <li><a href="{% url 'deliverables:index' %}">Deliverables</a></li>
    <li><a href="{% url 'deliverables:deliverable' deliverable.pk %}">{{ deliverable.name }}</a></li>
    <li><a href="{% url 'deliverables:decision_items' deliverable.pk %}">Decision Items</a></li>
    <li class="active">{{ form.instance.name }}</li>
  </ol>
{% endblock breadcrumb %}

{% block tabs %}
  {% include 'deliverables/includes/menu.html' with active='decision_items' deliverable=deliverable %}
{% endblock tabs %}

{% block content %}
  <h1 class="lead">Change decision item</h1>
  <form class="form-horizontal" method="post">
    {% csrf_token %}
    {% for hidden in form.hidden_fields %}
      {{ hidden }}
    {% endfor %}
    {% for field in form.visible_fields %}
      <div class="form-group{% if field.errors %} has-error{% endif %}">
        <label for="{{ field.id_for_label }}" class="col-md-2 col-sm-4 control-label">{{ fields|dictkey:field.name|dictkey:"label" }}</label>
        <div class="col-md-10 col-sm-8">
          {% if field|fieldtype == 'Textarea' %}
            <textarea class="form-control" id="{{ field.id_for_label }}" name="{{ field.html_name }}" maxlength="{{ field.field.max_length }}" rows="4">{{ field.value|default_if_none:'' }}</textarea>
          {% else %}
            <input type="text" class="form-control" value="{{ field.value|default_if_none:'' }}" id="{{ field.id_for_label }}" name="{{ field.html_name }}" maxlength="{{ field.field.max_length }}">
          {% endif %}
          {% for error in field.errors %}
            <p class="help-block">{{ error }}</p>
          {% endfor %}
          {% if field.help_text %}
            <span class="help-block">{{ field.help_text }}</span>
          {% endif %}
        </div>
      </div>
    {% endfor %}
    <div class="form-group">
      <div class="col-sm-offset-4 col-sm-8 col-md-offset-2 col-md-10">
        <a href="#" class="btn btn-danger pull-right">Delete</a>
        <button type="submit" class="btn btn-primary">Save</button>
        <a href="{% url 'deliverables:decision_items' deliverable.pk %}" class="btn btn-default">Cancel</a>
      </div>
    </div>
  </form>
{% endblock content %}
