{% extends 'meetings/dashboard/base_charts.html' %}

{% load staticfiles %}

{% block javascript %}
  <script src="{% static 'js/highcharts/highcharts.js' %}"></script>
  <script src="{% static 'js/highcharts/highcharts-more.js' %}"></script>
  <script src="{% static 'js/highcharts/modules/exporting.js' %}"></script>
  <script src="{% static 'js/meetings/dashboard.js' %}"></script>
  <script src="{% static 'js/meetings/meetings.js' %}"></script>
  <script>
    $(function () {
      $(".charts .panel-heading:eq(0)").loadchart();
    });
  </script>
{% endblock javascript %}

{% block charts %}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">
        <div class="btn-group pull-right" style="margin-top: -6px;">
          <button type="button" class="btn btn-default btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="glyphicon glyphicon-sort"></span> Order by <span class="caret"></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-right">
            <li{% if order = '-value_ranking' %} class="active"{% endif %}><a href="?order=-value_ranking">Value Ranking</a></li>
            {% for measure_value in meeting.deliverable.measure.measurevalue_set.all %}
              <li{% if order = measure_value.pk|slugify %} class="active"{% endif %}><a href="?order={{ measure_value.pk }}">{{ measure_value.description }}</a></li>
            {% endfor %}
            <li role="separator" class="divider"></li>
            <li{% if order = 'decision_item__name' %} class="active"{% endif %}><a href="?order=decision_item__name">Name</a></li>
          </ul>
        </div>
        {{order}}
        Factors Comparison
      </h3>
    </div>
    <div class="panel-body">
      <ul class="nav nav-tabs" style="margin-bottom: 20px;">
        <li role="presentation" class="active"><a href="{% url 'deliverables:meetings:features' meeting.deliverable.pk meeting.pk %}">All Decision Items</a></li>
        <li role="presentation"><a href="{% url 'deliverables:meetings:features_scenarios' meeting.deliverable.pk meeting.pk %}">Scenarios</a></li>
      </ul>
      <div class="panel-group charts">
        {% for chart in charts %}
          {% include 'meetings/dashboard/factors_comparison/chart.html' with opened=forloop.first %}
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock charts %}
