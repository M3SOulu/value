{% extends 'deliverables/meetings/dashboard/base_charts.html' %}

{% load staticfiles %}

{% block javascript %}
  <script src="{% static 'js/interact-1.2.4.min.js' %}"></script>
  <script src="{% static 'js/highcharts/highcharts.js' %}"></script>
  <script src="{% static 'js/deliverables/meetings/dashboard.js' %}"></script>
  <script>
    $(function () {
      $(".charts .panel-heading:eq(0)").loadchart();
    });
  </script>
{% endblock javascript %}

{% block breadcrumb %}
  <ol class="breadcrumb">
    <li><a href="{% url 'home' %}">Home</a></li>
    <li><a href="{% url 'deliverables:index' %}">Deliverables</a></li>
    <li><a href="{% url 'deliverables:deliverable' meeting.deliverable.pk %}">{{ meeting.deliverable.name }}</a></li>
    <li><a href="{% url 'deliverables:meetings:meeting' meeting.deliverable.pk meeting.pk %}">{{ meeting.name }}</a></li>
    <li class="active">Dashboard</li>
  </ol>
{% endblock breadcrumb %}

{% block charts %}
  <div class="panel-group charts">
    {% for chart in charts %}
      <div class="panel panel-default panel-chart">
        <div class="panel-heading" data-target="#collapse-{{ chart.chart_id }}" data-item-id="{{ chart.chart_id }}" data-uri="{{ chart.chart_uri }}">
          <div class="btn-group btn-group-xs pull-right chart-options" role="group" aria-label="Chart Options">
            <button type="button" class="btn btn-default btn-xs btn-chart-toggle">
              {% if forloop.first %}
                <span class="glyphicon glyphicon-minus"></span>
              {% else %}
                <span class="glyphicon glyphicon-plus"></span>
              {% endif %}
            </button>
            <button type="button" class="btn btn-default btn-xs btn-chart-expand"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-resize-full"></span></button>
            <button type="button" class="btn btn-default btn-xs btn-chart-modal"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-new-window"></span></button>
            <button type="button" class="btn btn-default btn-xs btn-chart-reload"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-refresh"></span></button>
            {% block toolbar %}
            {% endblock toolbar %}
          </div>
          <p class="panel-title"><a href="javascript:void(0)" class="btn-chart-toggle">{{ chart.chart_title }}</a></p>
        </div>
        <div id="collapse-{{ chart.chart_id }}" class="panel-collapse collapse"{% if forloop.first %} style="display: block;"{% endif %}>
          <div class="panel-body"></div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock charts %}
