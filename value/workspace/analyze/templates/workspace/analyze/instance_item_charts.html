{% extends 'workspace/analyze/base_charts.html' %}

{% load staticfiles %}

{% block javascript %}
  <script src="{% static 'js/highcharts/highcharts.js' %}"></script>
  <script src="{% static 'js/highcharts/modules/data.js' %}"></script>
  <script src="{% static 'js/highcharts/modules/treemap.js' %}"></script>
  <script src="{% static 'js/highcharts/modules/drilldown.js' %}"></script>
  <script src="{% static 'js/workspace/analyze/analyze.js' %}"></script>
  <script>
    $(function () {
      $(".charts .panel-heading:eq(0)").loadchart();
    });
  </script>
{% endblock javascript %}

{% block charts %}
  <div class="panel-group charts">
    {% for chart in charts %}
      <div class="panel panel-default panel-chart">
        <div class="panel-heading" data-target="#collapse-{{ chart.id }}" data-instance-id="{{ instance.id }}" data-item-id="{{ chart.id }}" data-uri="{% url 'workspace:instance' instance.id %}dashboard/{{ chart_uri }}/{{ chart.id }}/">
          <div class="btn-group btn-group-xs pull-right chart-options" role="group" aria-label="Chart Options">
            <button type="button" class="btn btn-default btn-xs btn-chart-toggle">
              {% if forloop.first %}
                <span class="glyphicon glyphicon-minus"></span>
              {% else %}
                <span class="glyphicon glyphicon-plus"></span>
              {% endif %}
            </button>
            <button type="button" class="btn btn-default btn-xs btn-chart-expand"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-resize-full"></span></button>
            <button type="button" class="btn btn-default btn-xs btn-chart-reload"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-refresh"></span></button>
            {% block toolbar %}
            {% endblock toolbar %}
          </div>
          <p class="panel-title" style="font-size: 14px"><a href="javascript:void(0)" class="btn-chart-toggle">{{ chart.name }}</a></p>
        </div>
        <div id="collapse-{{ chart.id }}" class="panel-collapse collapse"{% if forloop.first %} style="display: block;"{% endif %}>
          <div class="panel-body" style="min-height: 400px"></div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock charts %}
