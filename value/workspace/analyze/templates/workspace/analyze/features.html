{% extends 'workspace/analyze/base_charts.html' %}

{% load staticfiles %}

{% block javascript %}
  <script src="{% static 'js/highcharts/highcharts.js' %}"></script>
  <script src="{% static 'js/workspace/analyze/analyze.js' %}"></script>
  <script>
    $(function () {
      $(".charts .panel-heading:eq(0)").loadchart();
    });
  </script>
{% endblock javascript %}

{% block charts %}
  <div class="panel-group charts">
    {% for chart in charts %}
      <div class="panel panel-default panel-chart">
        <div class="panel-heading" data-target="#collapse-{{ chart.id }}" data-instance-id="{{ instance.id }}" data-item-id="{{ chart.id }}">
          <div class="btn-group btn-group-xs pull-right chart-options" role="group" aria-label="Chart Options">
            <button type="button" class="btn btn-default btn-xs btn-chart-toggle">
              {% if forloop.first %}
              <span class="glyphicon glyphicon-minus"></span>
              {% else %}
              <span class="glyphicon glyphicon-plus"></span>
              {% endif %}
            </button>
            <button type="button" class="btn btn-default btn-xs btn-chart-expand"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-new-window"></span></button>
            <button type="button" class="btn btn-default btn-xs btn-chart-reload"{% if not forloop.first %} disabled{% endif %}><span class="glyphicon glyphicon-refresh"></span></button>
            <div class="btn-group btn-group-xs" role="group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false"{% if not forloop.first %} disabled{% endif %}>
                <span class="fa fa-bar-chart"></span>
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu dropdown-menu-right js-chart-type" role="menu">
                <li role="presentation" class="dropdown-header">Chart type</li>
                <li role="presentation" class="active">
                  <a role="menuitem" tabindex="-1" href="javascript:void(0);" data-chart="bar"><span class="glyphicon glyphicon-align-left"></span> Stacked Bars</a>
                </li>
                <li role="presentation">
                  <a role="menuitem" tabindex="-1" href="javascript:void(0);" data-chart="column"><span class="glyphicon glyphicon-signal"></span> Stacked Columns</a>
                </li>
              </ul>
            </div>
          </div>
          <h4 class="panel-title" style="line-height: 1.4">
            <a href="javascript:void(0)" class="btn-chart-toggle">{{ chart.name }}</a>
          </h4>
        </div>
        <div id="collapse-{{ chart.id }}" class="panel-collapse collapse"{% if forloop.first %} style="display: block;"{% endif %}>
          <div class="panel-body" style="min-height: 400px"></div>
        </div>
      </div>
    {% endfor %}
  </div>
{% endblock charts %}
